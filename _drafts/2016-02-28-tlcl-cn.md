---
layout:     post
title:      "The Linux Command Line-cn Summary"
subtitle:   "命令行入门"
date:       2016-03-29
author:     "Voleking"
header-img: "/img/"
tags:
    -  命令行
    -  Shell
    -  Reading Note
    -  
---

[The Linux Command Line-cn](http://billie66.github.io/TLCL/index.html)

[TOC]




# 什么是 Shell #

shell 就是一个程序，它接受从键盘输入的命令，然后把命令传递给操作系统去执行。一说到命令行，我们真正指的是 shell。  

* 聚焦策略：单击聚焦/传统 X 行为（聚焦跟随鼠标）  
* 如果你想高亮一些文本，可以按下鼠标左键，沿着文本拖动鼠标（或者双击一个单词），那么这些高亮的文本就被拷贝到了一个由 X 管理的缓冲区里面。然后按下鼠标中键，这些文本就被粘贴到光标所在的位置。  
* 简单命令  
    - 显示系统当前时间：$ date  
    - 显示当前月份日历：$ cal  
    - 查看磁盘剩余空间数量：$ df  
    - 显示空闲内存的数量：$ free  
* 结束终端对话：$ exit  




# 文件系统跳转 #

绝对路径：绝对路径开始于根目录（/），紧跟着目录树的一个个分支，一直达到期望的目录或文件。 

相对路径：相对路径开始于工作目录。“.”指的工作目录，”..“指的工作目录的父目录。  
Ps：在几乎所有情况下，可以省略”./“


## 有用的快捷键 ##

1. pwd——打印当前工作目录  
    * 为了方便，通常设置提示符自动显示工作目录名。  
2. cd——更改当前目录  

    | cmd           | effect        |
    | :---:         | :---:         |
    | cd            | 更改工作目录到主目录    |
    | cd -          | 更改工作目录到先前工作目录 |
    | cd ~user_name | 更改工作目录到用户主目录  |

3. ls——列出目录内容 
    * 以 "." 字符开头的文件名是隐藏文件。这仅表示，ls 命令不能列出它们， 除非使用 ls -a 命令。 
    * ls 除了当前工作目录以外，也可以列出指定目录的内容；甚至可以列出多个指定目录的内容。


### Tips ###

* 文件名和命令名是大小写敏感的。  
* Linux 没有“文件扩展名”的概念，不像其它一些系统。可以用你喜欢的任何名字 来给文件起名。文件内容或用途由其它方法来决定。虽然类似 Unix 的操作系统， 不用文件扩展名来决定文件的内容或用途，但是应用程序会。  
* 虽然 Linux 支持长文件名，文件名可能包含空格，标点符号，但标点符号仅限 使用 “.”，“－”，下划线。最重要的是，不要在文件名中使用空格。如果你想表示词与词间的空格，用下划线字符来代替。




# 研究操作系统 #


## 选项和参数 ##

命令名经常会带有一个或多个用来更正命令行为的选项，更进一步，选项后面会带有一个或多个参数，这些参数是命令作用的对象。所以大多数命令看起来像这样：  

    command -options arguments

大多数命令使用的选项，是由一个中划线加上一个字符组成，例如，“-l”，但是许多命令，包括来自于 GNU 项目的命令，也支持长选项，长选项由两个中划线加上一个字组成。当然， 许多命令也允许把多个短选项串在一起使用。

### ls 命令选项 ###

| 选项    | 长选项              | 描述                                  |
| :---: | :---:            | :---:                               |
| -a    | --all            | 列出所有文件，包括文件名以“.”开头的隐藏文件。            |
| -d    | --directory      | 与 -l 选项结合使用，可以看到所指目录的详细信息，而不是目录中的内容 |
| -F    | --classify       | 给目录名加上“/”只指示符                       |
| -h    | --human-readable | 使长格式列出以可读形式                         |
| -l    |                  | 以长格式列出                              |
| -r    | --reverse        | 以相反顺序列出                             |
| -S    |                  | 按文件大小列出                             |
| -t    |                  | 按照修改时间列出                            |


## file － 确定文件类型 ##

    $ file filename


## 用 less 浏览文本文件内容 ##

    $ less filename

### less 命令 ###

| 命令                 | 行为                           |
| :--:               | :--:                         |
| Page UP or b       | 向后翻滚一页                       |
| Page Down or space | 向前翻动一页                       |
| UP Arrow           | 向前移动一行                       |
| Down Arrow         | 向后移动一行                       |
| G                  | 移动到最后一行                      |
| 1G or g            | 移动到开头一行                      |
| /charaters         | 向前查找指定的字符串                   |
| n                  | 向前查找下一个出现的字符串，这个字符串是之前所指定查找的 |
| h                  | 显示帮助屏幕                       |
| q                  | 退出 less 程序                   |




# 操作文件和目录 #


## 通配符 ##

| 通配符           | 意义                |
| :---:         | :---:             |
| *             | 匹配任意多个字符（包括零个或一个） |
| ？             | 匹配任意一个字符（不包括零个）   |
| [characters]  | 匹配任意一个属于字符集中的字符   |
| [!characters] | 匹配任意一个不是字符自中的字符   |
| [[:class:]]   | 匹配任意一个属于指定字符类中的字符 |

Ps 常用字符类：  
[[:alnum:]], [[:alpha:]], [[:digit:]], [[:lower:]], [[:upper:]]  


## mkdir － 创建目录 ##

    mkdir directory...
    //当有三个圆点跟在一个命令的参数后面， 这意味着那个参数可以重复


## cp － 复制文件和目录 ##

    cp item1 item2              //复制单个文件或目录"item1"到文件或目录"item2"
    cp item... directory        //复制多个项目（文件或目录）到一个目录下。

### 选项 ###

| 选项    | 长选项           | 意义                |
| :---: | :---:         | :---              |
| -a    | --archive     | 复制文件和目录及其属性       |
| -i    | --interactive | 重写文件之前提示用户确认      |
| -r    | --recursive   | 递归复制目录及目录中的内容     |
| -u    | --update      | 仅复制目录中不存在或内容更新的文件 |
| -v    | --verbose     | 显示翔实的命令操作信息       |


## mv － 移动／重命名文件和目录 ##

完成操作后，**原来的文件不再存在**

    mv item1 item2              //把文件或目录 “item1” 移动或重命名为 “item2”
    mv item... directory        //把一个或多个条目从一个目录移动到另一个目录中

mv 与 cp 共享了 -i、-u、-v 等很多选项。


## rm － 删除文件和目录 ##

**Take Care!**
**一但使用 rm 删除了文件，就无法复原了**

    rm item...                  //移除文件或目录

除上面选项之外，常用的还有：  

| 选项    | 长选项       | 意义          |
| :---: | :---:     | :---        |
| -f    | --force | 忽视不存在文件，颠覆 -i 选项 |


## ln － 创建硬链接和符号链接 ##

    ln file link                //创建硬链接
    ln -s item link             //创建符号链接

* 硬链接  
    - 硬链接和文件本身没有区别  
    - 局限性  
        1. 一个硬链接不能关联它所在文件系统之外的文件。这是说一个链接不能关联与链接本身不在同一个磁盘分区上的文件。  
        2. 一个硬链接不能关联一个目录。  
* 软链接  
    - 类似于快捷方式的存在  
    - 文件先于链接被删除称为坏链接  




# 使用命令 #


## type － 显示命令类型 ##

    $ type command


## which － 显示一个可执行程序的位置 ##

这个命令只对可执行程序有效，不包括内部命令和命令别名。  
>Ps：在 OS X 10.11.1 + zsh 下 which 和 type 效果貌似一样


## help － 得到 shell 内部命令的帮助文档 ##

--help - 显示用法信息

>Ps：在 OS X 10.11.1 + zsh 下不能用。。。说好的兼容 bash 呢


## man －显示程序手册页 ##

    $ man program
    $ man section search_term
    指定章节号


## apropos －显示适当的命令 ##

man 命令加上"-k"选项， 和 apropos 完成一样的功能。


## whatis －显示非常简洁的命令说明 ##

whatis 程序显示匹配特定关键字的手册页的名字和一行命令说明。


## info - 显示程序 Info 条目 ##

GNU 项目提供了一个命令程序手册页的替代物，称为 "info"。info 内容可通过 info 阅读器 程序读取。


## 用别名（alias）创建你自己的命令 ##

    $ test name
    用 test 查明 name 是否已经存在
    $ alias name='string'
    
    $ unalias name
    删除别名
    $ alias 
    查看所有定义在系统环境中的别名




# 重定向 #


## 重定向输入输出 ##

    $ ... < filename
    重定向标准输入，后接文件名
    $ ... > filename 
    重定向标准输出 
    $ ... >> filename
    追加输出

事实上，如果我们需要删除一个文件内容（或者创建一个新的空文件），可以使用这样的技巧：`$ > filename`

输入、输出、错误分别对应文件描述符 0，1，2

    $ ... 2> [file] 
    重定向标准错误
    $ ... 2>&1
    重定向文件描述符 2（标准输入） 到文件描述符 1（标准输出）（！注意先后顺序）
    $ &> 
    重定向标准输出和错误

有时候“沉默是金”，我们不想要一个命令的输出结果，只想把它们扔掉。这种情况尤其适用于错误和状态信息。系统为我们提供了解决问题的方法，通过重定向输出结果 到一个特殊的叫做"/dev/null"的文件。这个文件是系统设备，叫做位存储桶，它可以接受输入，并且对输入不做任何处理。


## cat - 连接文件 ##

    $ cat [file]
    cat 命令读取一个或多个文件，然后复制它们到标准输出。

可以用 cat 显示文件而没有分页。也可以把文件连接在一起：`cat file.0* > file`


## 管道线与过滤器 ##

通过管道线一个命令的标准输出可以管道到另一个命令的标准输入：
    
    command 1 | command 2

>Ps: 有个利用管道线的 Text-mode interface for git：[tig](https://github.com/jonas/tig)

多个命令放在一起组成一个管道线，以这种方式使用命令被成为过滤器。

### 结合使用的几个命令 ###

+ sort 
+ uniq - 报道或忽略重复行
+ wc - 打印行，字和字节数
    * `wc [file...]`
    * -l 限制只能输出行数
+ grep - 打印匹配行
    * `grep pattern [file...]`
    * -i 忽略大小写
    * -v 打印不匹配项
+ head / tial - 打印文件开头/结尾部分    
    * -n 调整行数
    * -f 实施监控日志文件的进展
+ tee - 从 Stdin 读取数据，并同时输出到 Stdout 和文件




# 从 Shell 眼中看世界 #


## echo - 显示一行文本（字符）展开 ##

+ 路径名展开
+ ~ 展开
+ 算术表达式展开（只支持整数）：`echo $((expression))` 
+ 花括号展开
+ 参数展开
+ 历史展开：`![num]`
+ 命令替换
+ 引用
+ 双引号
    * 双引号中，参数展开，算术表达式展开和命令替换仍然有效
+ 单引号
    * 禁止所有展开
+ 转义字符
    * `echo -e` 能够解释转义序列
        - 简单的倒数计数器：`sleep 10；echo "Time's up\a"`




# 键盘高级操作技巧 #

不妨参考 Wikipedia entries [GNU Readline](https://en.wikipedia.org/wiki/GNU_Readline)




# 权限 #

### 文件属性 ###

| 属性    | 文件类型     |
| :---: | :---:    |
| -     | 普通文件     |
| d     | 一个目录     |
| l     | 一个符号链接   |
| c     | 一个字符设备文件 |
| b     | 一个字符设备文件 |


## chmod - 更改文件模式 ##

### 八进制法 ###

| Octal | Binary | File Mode |
| :--:  | :--:   | :--:      |
| 0     | 000    | ---       |
| 1     | 001    | --x       |
| 2     | 010    | -w-       |
| 3     | 011    | -wx       |
| 4     | 100    | r--       |
| 5     | 101    | r-x       |
| 6     | 110    | rw-       |
| 7     | 111    | rwx       |

### 符号表示法 ###

+ chmod 命令符号表示法

| 简写 | 意义                           |
| :----: | :------:                          |
| u    | “user”的简写，意思是文件或目录的所有者。         |
| g    | 用户组。                            |
| o    | “others” 的简写，意思是其他所有的人。         |
| a    | “all” 的简写，是“u”，“g”，和 “o” 三者的联合。 |

执行的操作：  

+ `+` 表示加上一个权限。
+ `-` 表示删除一个权限。
+ `=` 表示只有指定权限可用，其他权限被删除。


## umask － 设置默认权限 ##

使用八进制表示法来表达 从文件模式属性中删除一个位掩码。

一些特使权限：setuid 位（八进制4000)，setuid 位（八进制4000)，sticky 位（八进制1000）


## 更改身份 ##

### su－以其他用户身份和组 ID 运行一个 shell ###

`su [-[l]] [user]`

当工作完成后， 输入"exit"，则返回到原来的 shell.

执行单个命令：
`su -c 'command'`

### sudo－以另一个用户身份执行命令 ###

sudo 赋予普通用户超级用户权限

### chown－更改文件所有者和用户组 ###

`chown [owner][:[group]] file...`

| 参数        | 结果                                         |
| :---:     | :----:                                     |
| bob       | 把文件所有者从当前属主更改为用户 bob。                      |
| bob:users | 把文件所有者改为用户 bob，文件用户组改为用户组 users。           |
| :admins   | 把文件用户组改为组 admins，文件所有者不变。                  |
| bob:      | 文件所有者改为用户 bob，文件用户组改为用户 bob 登录系统时所属的用户组。 |

### chgrp－更改用户组所有权 ###

chown 命令只能更改文件所有权，除了限制多一点之外，chgrp 命令与 chown 命令使用起来很相似。

### 更改用户密码 ###

`passwd [user]`




# 进程 #
